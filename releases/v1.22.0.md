# Release v1.22.0 - n8n 2.2.6 Compatibility Update

**Release Date:** 2025-01-09

## ğŸ¯ Overview

Version 1.22.0 updates the MCP server's compatibility database to support **n8n version 2.2.6**, including all breaking changes and deprecated nodes from n8n 2.0 through 2.2.6.

## âœ¨ What's New

### n8n 2.0+ Breaking Changes Support

The compatibility database now tracks all major breaking changes from n8n 2.0:

#### **Removed Nodes**
- âŒ **Start Node** - Completely removed in n8n 2.0
  - **Migration:** Use `Manual Trigger` node for manual executions or `Execute Workflow Trigger` node for sub-workflows

#### **Disabled-by-Default Nodes** (Security)
- ğŸ”’ **Execute Command Node** - Disabled by default for security
- ğŸ”’ **LocalFileTrigger Node** - Disabled by default for security
  - **Fix:** Enable via `N8N_NODES_INCLUDE` environment variable

#### **Code Node Security Changes**
- ğŸ›¡ï¸ Task runners enabled by default (isolated execution environment)
- ğŸ›¡ï¸ Environment variable access blocked by default (`N8N_BLOCK_ENV_ACCESS_IN_NODE=true`)
- âš ï¸ Pyodide-based Python Code node removed - use `pythonNative` parameter instead

#### **Database Changes**
- ğŸ—„ï¸ MySQL/MariaDB support dropped - PostgreSQL or SQLite only
- ğŸ—„ï¸ SQLite legacy driver removed - pooling driver only (up to 10x faster)
- ğŸ’¾ In-memory binary data mode removed

#### **Configuration Changes**
- OAuth callback URLs require authentication by default
- `n8n --tunnel` option removed
- `update:workflow` CLI command replaced

### Enhanced Node Coverage

Added compatibility tracking for:
- **Data Table Node** - CRUD operations enhancement (n8n 2.2.0)
- **AI Agent Node** - Message handling updates (n8n 2.2.0)
- **Code Node** - Security and isolation changes (n8n 2.0+)

### Version Timeline

The database now covers:
- **n8n 0.180.0** â†’ **2.2.6** (current)
- 13 major version milestones tracked
- 34 nodes monitored
- 100+ compatibility issues documented

## ğŸ“Š Compatibility Database Stats

```json
{
  "version": "2.0.0",
  "total_nodes": 34,
  "n8n_version_support": "0.180.0 - 2.2.6",
  "coverage": {
    "core_nodes": 18,
    "langchain_nodes": 12,
    "trigger_nodes": 3,
    "logic_nodes": 2
  }
}
```

## ğŸ”„ Migration Guide

### If you're upgrading from n8n 1.x to 2.x:

1. **Check for Start Nodes**
   ```bash
   # Use the MCP server to check workflows
   check_workflow_compatibility <workflow_id>
   ```

2. **Review Code Nodes**
   - All Code nodes will run in isolated environments
   - Environment variables are blocked by default
   - Python code must use `pythonNative` syntax

3. **Database Migration**
   - If using MySQL/MariaDB, migrate to PostgreSQL or SQLite
   - SQLite users: pooling driver is now automatic

4. **Security Review**
   - Execute Command and LocalFileTrigger nodes require explicit enabling
   - Review OAuth configurations

## ğŸ› ï¸ Files Changed

- `src/n8n_workflow_builder/migration/compatibility_db.json` - Updated with n8n 2.0-2.2.6 changes
- `pyproject.toml` - Version bump to 1.22.0

## ğŸ“š Resources

- [n8n 2.0 Breaking Changes](https://docs.n8n.io/2-0-breaking-changes/)
- [n8n Migration Tool](https://docs.n8n.io/migration-tool-v2/)
- [n8n Release Notes](https://docs.n8n.io/release-notes/)

## ğŸ” How to Use

```bash
# Check if workflows are compatible with n8n 2.2.6
check_workflow_compatibility <workflow_id>

# Audit all workflows after upgrade
audit_all_workflows
```

## âš ï¸ Important Notes

- This update adds compatibility **detection** for n8n 2.2.6
- No breaking changes to the MCP server API
- All existing functionality remains unchanged
- The MCP server works with **all n8n versions** from 0.180.0 to 2.2.6

## ğŸš€ Upgrade Instructions

```bash
# Update to the latest version
pip install --upgrade n8n-workflow-builder

# Or with git
cd n8n-workflow-builder
git pull
pip install -e .
```

---

**Contributors:** MCP Server Team
**Supported n8n Versions:** 0.180.0 - 2.2.6
