# Release v1.15.0 - Migration Engine

**Release Date:** 2025-12-17

## üîÑ Major Feature: Migration Engine

Added comprehensive Migration Engine for automatic node compatibility checking and workflow updates.

### Problem Solved

Many community templates and old workflows break when n8n APIs change. Deprecated parameters, renamed fields, and breaking changes make it difficult to maintain workflows over time.

### Solution

Automatic compatibility checking and migration with smart upgrade rules.

## ‚ú® What's New

### Migration System Components

1. **Version Checker** - Detects compatibility issues in workflows
2. **Migration Engine** - Applies rule-based transformations
3. **Migration Rules** - Predefined upgrade paths for common nodes
4. **Workflow Updater** - High-level update interface
5. **Migration Reporter** - Generates detailed formatted reports

### New MCP Tools

#### `check_workflow_compatibility`
Check workflow for compatibility issues with detailed severity analysis.

**Example:**
```
"Check workflow abc123 for compatibility issues"
"Are there any deprecated nodes in my workflow?"
```

#### `migrate_workflow`
Automatically migrate workflow to latest node versions.

**Parameters:**
- `workflow_id` (required)
- `dry_run` (optional) - Preview without applying
- `target_version` (optional) - Target specific version

**Example:**
```
"Migrate workflow abc123 to latest versions"
"Migrate workflow xyz789 with dry_run=true"
```

#### `get_migration_preview`
Preview migration changes without applying them.

**Example:**
```
"Show me what would change if I migrate workflow abc123"
"Preview migration for 'Customer API' workflow"
```

#### `batch_check_compatibility`
Check multiple workflows at once with summary statistics.

**Example:**
```
"Check all workflows for compatibility"
"Check workflows abc123, def456, ghi789"
```

#### `get_available_migrations`
List available migration rules for a specific node type.

**Example:**
```
"What migrations are available for HTTP Request node?"
"Show me postgres node migrations"
```

### Built-in Migration Rules

#### HTTP Request Node
- **v2 ‚Üí v3:** Renames `url` ‚Üí `requestUrl`, `method` ‚Üí `requestMethod`, moves authentication to credentials (HIGH severity)
- **v3 ‚Üí v4:** Adds new authentication options, updates response handling (MEDIUM severity)

#### Postgres Node
- **v1 ‚Üí v2:** Renames `executeQuery` ‚Üí `query`, updates parameter structure (HIGH severity)

#### Slack Node
- **v1 ‚Üí v2:** Updates message formatting, new attachment structure, enables markdown by default (MEDIUM severity)

#### Webhook Node
- **v1 ‚Üí v2:** New response options, improved authentication (LOW severity)

#### Set Node
- **v1 ‚Üí v2:** New value setting structure (LOW severity)

#### Function Node
- **v1 ‚Üí v2:** API changes (`$item()` ‚Üí `items[0]`, `$items()` ‚Üí `items`), adds migration comments to code (CRITICAL severity)

## üìä Features

### Compatibility Statuses
- ‚úÖ **COMPATIBLE** - No issues, ready to use
- üü° **DEPRECATED** - Works but has deprecated features
- üî¥ **BREAKING** - Has breaking changes, may fail
- ‚ùì **UNKNOWN** - Node not in compatibility database

### Issue Severities
- **critical** - Must fix before deployment
- **high** - Should fix soon
- **medium** - Fix when convenient
- **low** - Nice to fix

### Safe Migration
- Preview changes before applying (dry-run mode)
- Preserves workflow structure, connections, and node names
- Validates migrations to prevent data loss
- Detailed before/after comparison reports

## üìñ Documentation

New comprehensive documentation added:
- **[docs/MIGRATION.md](../docs/MIGRATION.md)** - Complete Migration Engine guide
- Architecture overview
- Usage examples
- Best practices
- Technical details

## üîß Technical Details

### New Files
- `src/n8n_workflow_builder/migration/version_checker.py` - Compatibility detection
- `src/n8n_workflow_builder/migration/migration_engine.py` - Core transformation engine
- `src/n8n_workflow_builder/migration/migration_rules.py` - Predefined upgrade rules
- `src/n8n_workflow_builder/migration/updater.py` - High-level update interface
- `src/n8n_workflow_builder/migration/reporter.py` - Report generation

### Integration
- 5 new MCP tools integrated into server
- Modular architecture for easy extensibility
- Rule-based system for adding custom migrations

## üí° Use Cases

### Before n8n Upgrade
```
1. "Batch check all workflows for compatibility"
2. Review report - identify critical issues
3. "Migrate workflow abc123" (for each problematic workflow)
4. Test migrated workflows
```

### Community Template Import
```
1. Import template from community
2. "Check workflow for compatibility"
3. See deprecated parameters
4. "Migrate workflow" (auto-fix)
5. Deploy updated template
```

### Regular Maintenance
```
1. "Check all workflows for compatibility"
2. Get summary: X compatible, Y deprecated, Z breaking
3. Prioritize by severity
4. Migrate high-priority workflows first
```

## ‚ö†Ô∏è Important Notes

- Always preview migrations before applying to production workflows
- Test migrated workflows in staging environment first
- Custom code in Function nodes may require manual review
- Migration cannot guarantee 100% compatibility for complex custom logic

## üöÄ Getting Started

```bash
# Check a workflow
"Check workflow abc123 for compatibility"

# Preview changes
"Show me what would change if I migrate workflow abc123"

# Apply migration
"Migrate workflow abc123"

# Batch check
"Check all workflows for compatibility"
```

## üìù Release Notes

- Added Migration Engine with 5 core components
- Implemented 5 new MCP tools for migration operations
- Added 7 built-in migration rules for common n8n nodes
- Created comprehensive migration documentation
- Supports dry-run previews and batch operations
- Validates migrations to ensure data preservation

---

**Full Changelog:** [v1.14.1...v1.15.0](https://github.com/yourusername/n8n-workflow-builder/compare/v1.14.1...v1.15.0)
